<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>SPARQL 1.2 Query Results JSON Format</title>

    <script src="https://www.w3.org/Tools/respec/respec-w3c" class="remove" defer>
    </script>
    <script class="remove">
      // All config options at https://respec.org/docs/
      var respecConfig = {
        // extend the bibliography entries
        //localBiblio:            "sparql.localBiblio",
        
        // specification status (e.g. WD, LCWD, NOTE, etc.). If in doubt use ED.
        specStatus:             "ED",

        // if you wish the publication date to be other than today, set this
        //publishDate:          "2023-08-24",
        
        editors: [
            { name: "Andy Seaborne",
              url: "https://www.linkedin.com/in/andyseaborne/",
              w3cid: "29909"
            }
        ],
        formerEditors: [
          { name: "Andy Seaborne" },
          { name: "Kendall Grant Clark" },
          { name: "Lee Feigenbaum" },
          { name: "Elias Torres" },
        ],

        github: { repoURL: "https://github.com/w3c/sparql-results-json", branch: "main"},

        shortName: "sparql12-results-json",
        xref: "web-platform",
        group: "rdf-star" ,
        wgPublicList: "public-rdf-star-wg",

// Only for publication        
//         prevVersion:          "http://www.w3.org/TR/2013/REC-sparql11-results-json-20130321",
//         previousPublishDate:  "2013-03-21",
//         previousMaturity:     "TR",
//         prevRecURI:           "http://www.w3.org/TR/2013/REC-sparql11-results-json-20130321",
        
        errata:               "https://w3c.github.io/rdf-star-wg/errata",
        edDraftURI:           "https://w3c.github.io/sparql12-results-json/",
        testSuiteURI:         "https://w3c.github.io/rdf-tests/",
//        implementationReportURI: "https://w3c.github.io/sparql12-results-json/reports/",

        includePermalinks:      true,
        //pluralize:              true,

        lint: { "no-unused-dfns": false }
      };
    </script>

    <style type="text/css">
      @import url("local.css");

      /* ReSpec */
      dfn { font-style: normal ; }
      /* ReSpec */

  code           { font-family: monospace; }

  div.constraint,
  div.issue,
  div.note,
  div.notice     { margin-left: 2em; }

  ol.enumar      { list-style-type: decimal; }
  ol.enumla      { list-style-type: lower-alpha; }
  ol.enumlr      { list-style-type: lower-roman; }
  ol.enumua      { list-style-type: upper-alpha; }
  ol.enumur      { list-style-type: upper-roman; }


  div.exampleInner pre { margin-left: 1em;
                       margin-top: 0em; margin-bottom: 0em}
  div.exampleOuter {border: 4px double gray;
                  margin: 0em; padding: 0em}
  div.exampleInner { background-color: #d5dee3;
                   border-top-width: 4px;
                   border-top-style: double;
                   border-top-color: #d3d3d3;
                   border-bottom-width: 4px;
                   border-bottom-style: double;
                   border-bottom-color: #d3d3d3;
                   padding: 4px; margin: 0em }
  div.exampleWrapper { margin: 4px }
  div.exampleHeader { font-weight: bold;
                    margin: 4px}

  em.rfc2119 { text-transform: lowercase;
             font-variant: small-caps;
             font-style: normal; }
    </style>
  </head>
  <body>
    <section id="abstract">
      <h2>Abstract</h2>
<p><a href="http://www.w3.org/TR/sparql11-query/">SPARQL</a> is a set of standards for the query and update of RDF data, along with ways to access such data over the web. This document describes
    the representation of SELECT and ASK query results using <a href="http://www.ietf.org/rfc/rfc4627.txt">JSON</a>.</p>
    </section>

    <section id="sotd" class="introductory">
      <p>
        This specification is published by the
        <a href="https://www.w3.org/groups/wg/rdf-star">RDF Star Working Group</a> as part of the
        update of specifications for format and errata.
      </p>
    </section>

    <section id="sparql12-documents" class="introductory">
      <h2>SPARQL 1.2 Documents</h2>
      <ul>
        <li><a href="../../sparql-new/spec/index.html">SPARQL 1.2 New</a></li>
        <li><a href="../../sparql-concepts/spec/index.html">SPARQL 1.2 Overview</a></li>
        <li><a href="../../sparql-query/spec/index.html">SPARQL 1.2 Query Language</a></li>
        <li><a href="../../sparql-update/spec/index.html">SPARQL 1.2 Update</a></li>
        <li><a href="../../sparql-entailment/spec/index.html">SPARQL 1.2 Entailment Regimes</a></li>
        <li><a href="../../sparql-service-description/spec/index.html">SPARQL 1.2 Service Description</a></li>
        <li><a href="../../sparql-federated-query/spec/index.html">SPARQL 1.2 Federated Query</a></li>
        <li><a href="../../sparql-results-json/spec/index.html">SPARQL 1.2 Query Results JSON Format</a></li>
        <li><a href="../../sparql-results-csv-tsv/spec/index.html">SPARQL 1.2 Query Results CSV and TSV Formats</a></li>
        <li><a href="../../sparql-results-xml/spec/index.html">SPARQL 1.2 Query Results XML Format</a></li>
        <li><a href="../../sparql-graph-store-protocol/spec/index.html">SPARQL 1.2 Graph Store Protocol</a></li>
        <li><a href="../../sparql-protocol/spec/index.html">SPARQL 1.2 Protocol</a></li>
      </ul>
    </section>
    
<!-- BODY -->
    <section id="introduction">
      <h2>Introduction</h2>
      <p>This document describes how to serialize SPARQL results (SELECT and ASK query forms) in a <a href="http://www.ietf.org/rfc/rfc4627.txt">JSON</a> format. The format is designed to be a
      complete representation of the information in the query results. The results of a SELECT query are serilialized as an array, where each array element is one "row" of the query results; the
      results of an ASK query give the boolean value of the query result.</p>
      <p>An Internet Media Type is provied for <code>application/sparql-results+json</code>.</p>
      <p>There is also a <a href="http://www.w3.org/TR/rdf-sparql-XMLres/">SPARQL Query Results XML Format</a> [<a href="#SRX">SRX</a>] which follows a similar design pattern but uses XML as the
      serialization.</p>
      <p>Unless otherwise noted in the section heading, all sections and appendices in this document are normative.</p>
    </section>
    <section id="json-result-object">
      <h2>JSON Results Object</h2>
      <p>The results of a SPARQL Query are serialized in JSON as a single top-level JSON object. This object has a <code>"head"</code> member and either a <code>"results"</code> member or a
      <code>"boolean"</code> member, depending on the query form.</p>
      <p>This example shows the results of a <code>SELECT</code> query. The query solutions are represented in an array which is the value of the <code>"bindings"</code> key, in turn part of an
      object that is the value of the <code>"results"</code> key:</p>
      <pre class="json">{
  "head": { "vars": [ "book" , "title" ]
  } ,
  "results": { 
    "bindings": [
      {
        "book": { "type": "uri" , "value": "http://example.org/book/book6" } ,
        "title": { "type": "literal" , "value": "Harry Potter and the Half-Blood Prince" }
      } ,
      {
        "book": { "type": "uri" , "value": "http://example.org/book/book7" } ,
        "title": { "type": "literal" , "value": "Harry Potter and the Deathly Hallows" }
      } ,
      {
        "book": { "type": "uri" , "value": "http://example.org/book/book5" } ,
        "title": { "type": "literal" , "value": "Harry Potter and the Order of the Phoenix" }
      } ,
      {
        "book": { "type": "uri" , "value": "http://example.org/book/book4" } ,
        "title": { "type": "literal" , "value": "Harry Potter and the Goblet of Fire" }
      } ,
      {
        "book": { "type": "uri" , "value": "http://example.org/book/book2" } ,
        "title": { "type": "literal" , "value": "Harry Potter and the Chamber of Secrets" }
      } ,
      {
        "book": { "type": "uri" , "value": "http://example.org/book/book3" } ,
        "title": { "type": "literal" , "value": "Harry Potter and the Prisoner Of Azkaban" }
      } ,
      {
        "book": { "type": "uri" , "value": "http://example.org/book/book1" } ,
        "title": { "type": "literal" , "value": "Harry Potter and the Philosopher's Stone" }
      }
    ]
  }
}</pre>
      <p>This example shows the result from an <code>ASK</code> query:</p>
      <pre class="json">{ 
  "head" : { } ,
  "boolean" : true
}</pre>
      <p>Other keys, with different names, may be present in the JSON Results Object but are not defined by this specification.</p>
    </section>
    <section id="select-results-form">
      <h2>Variable Binding Results</h2>
      <p>The results of a SPARQL <code>SELECT</code> query are serialized as an array of bindings of variables. The value of the <code>"head"</code> key is an array of all variables projected in the
      query's <code>SELECT</code> clause.</p>
      <section id="select-head">
        <h3>"head"</h3>
        <p>The <code>"head"</code> member gives the variables mentioned in the results and may contain a <code>"link"</code> member.</p>
        <pre class="json">{
"head" { 
   "vars" : [ ... ] ,
   "link" : [ ... ] }</pre>
        <section id="select-vars">
          <h4>"vars"</h4>
          <p>The <code>"vars"</code> member is an array giving the names of the variables used in the results. These are the projected variables from the query. A variable is not necessarily given a
          value in every query solution of the results.</p>
          <pre class="json">"vars" : [ "book" , "title" ] </pre>
          <p>The order of variable names should correspond to the variables in the SELECT clause of the query, unless the query is of the form <code>SELECT *</code> in which case order is not
          significant.</p>
        </section>
        <section id="select-link">
          <h4>"link"</h4>
          <p>The optional <code>"link"</code> member gives an array of URIs, as strings, to refer for further information. The format and content of these link references is not defined by this
          document.</p>
          <pre class="json">"link" : [ "http://example/dataset/metadata.ttl" ] </pre>
        </section>
      </section>
      <section id="select-results">
        <h3>"results"</h3>
        <p>The value of the <code>"results"</code> member is an object with a single key, <code>"bindings"</code>.</p>
        <section id="select-bindings">
          <h4>"bindings"</h4>
          <p>The value of the <code>"bindings"</code> member is an array with zero or more elements, one element per query solution. Each query solution is a JSON object. Each key of this object is a
          variable name from the query solution. The value for a given variable name is a JSON object that <a href="#select-encode-terms">encodes the variable's bound value, an RDF term.</a> There
          are zero elements in the array if the query returned an empty solution sequence. Variables names do not include the initial "?" or "$" character. Each variable name that appears as a key
          within the <code>"bindings"</code> array will have appeared in the <a href="#select-vars"><code>"vars"</code></a> array in the results header.</p>
          <p>A variable does not appear in an array element if it is not bound in that particular query solution.</p>
          <p>The order of elements in the bindings array reflects the order, if any, of the query solution sequence.</p>
          <pre class="json">"bindings" : [
               {
                 "a" : { ... } ,
                 "b" : { ... } 
               } ,
               {
                 "a" : { ... } ,
                 "b" : { ... } 
               }
             ]</pre>
          <p>If the query returns no solutions, an empty array is used.</p>
          <pre class="json">"bindings" : []</pre>
        </section>
        <section id="select-encode-terms">
          <h4>Encoding RDF terms</h4>
          <p>An RDF term (IRI, literal or blank node) is encoded as a JSON object. All aspects of the RDF term are represented. The JSON object has a <code>"type"</code> member and other members
          depending on the specific kind of RDF term.</p>
          <table style="border-collapse: collapse; border-color: #000000" cellpadding="5" border="1">
            <tbody>
              <tr>
                <th>RDF Term</th>
                <th>JSON form</th>
              </tr>
              <tr>
                <td>IRI <em><b>I</b></em></td>
                <td><code>{"type": "uri", "value": "<em><b>I</b></em>"}</code></td>
              </tr>
              <tr>
                <td>Literal <em><b>S</b></em></td>
                <td><code>{"type": "literal","value": "<em><b>S</b></em>"}</code></td>
              </tr>
              <tr>
                <td>Literal <em><b>S</b></em> with language tag <em><b>L</b></em></td>
                <td><code>{ "type": "literal", "value": "<em><b>S</b></em>", "xml:lang": "<em><b>L</b></em>"}</code></td>
              </tr>
              <tr>
                <td>Literal <em><b>S</b></em> with datatype IRI <em><b>D</b></em></td>
                <td><code>{ "type": "literal", "value": "<em><b>S</b></em>", "datatype": "<em><b>D</b></em>"}</code></td>
              </tr>
              <tr>
                <td>Blank node, label <em><b>B</b></em></td>
                <td><code>{"type": "bnode", "value": "<em><b>B</b></em>"}</code></td>
              </tr>
            </tbody>
          </table>
          <p>The blank node label is scoped to the results object. That is, two blank nodes with the same label in a single SPARQL Results JSON object are the same blank node. This is not an
          indication of any internal system identifier the SPARQL processor may use. Use of the same label in another SPARQL Results JSON object does not imply it is the same blank node.</p>
        </section>
      </section>
    </section>
    <section id="ask-result-form">
      <h2>Boolean Results</h2>
      <p>The results of a SPARQL <code>ASK</code> query are serialized as a boolean value, giving the result of the query evaluation.</p>
      <section id="ask-head">
        <h3>"head"</h3>
        <section id="ask-link">
          <h4>"link"</h4>
          <p>The <code>"link"</code> member has the same format as the <a href="#select-link">SELECT <code>"link"</code></a> member.</p>
        </section>
      </section>
      <section id="ask-boolean">
        <h3>"boolean"</h3>
        <p>The result of an <code>ASK</code> query form are encoded by the <code>"boolean"</code> member, which takes either the JSON value <code>true</code> or the JSON value <code>false</code>.</p>
        <pre class="json">"boolean" : true </pre>
      </section>
    </section>
    <section id="example">
      <h2>Example</h2>
      <p>This section is not normative.</p>
      <p>The following JSON is a serialization of the XML document <a class="reference" href="http://www.w3.org/TR/rdf-sparql-XMLres/output.srx">output.srx</a>:</p>
      <pre class="json">{
   "head": {
       "link": [
           "http://www.w3.org/TR/rdf-sparql-XMLres/example.rq"
           ],
       "vars": [
           "x",
           "hpage",
           "name",
           "mbox",
           "age",
           "blurb",
           "friend"
           ]
       },
   "results": {
       "bindings": [
               {
                   "x" : { "type": "bnode", "value": "r1" },

                   "hpage" : { "type": "uri", "value": "http://work.example.org/alice/" },

                   "name" : {  "type": "literal", "value": "Alice" } ,
                   
                   "mbox" : {  "type": "literal", "value": "" } ,

                   "blurb" : {
                     "datatype": "http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral",
                     "type": "literal",
                     "value": "&lt;p xmlns=\"http://www.w3.org/1999/xhtml\"&gt;My name is &lt;b&gt;alice&lt;/b&gt;&lt;/p&gt;"
                   },

                   "friend" : { "type": "bnode", "value": "r2" }
               },
               {
                   "x" : { "type": "bnode", "value": "r2" },
                   
                   "hpage" : { "type": "uri", "value": "http://work.example.org/bob/" },
                   
                   "name" : { "type": "literal", "value": "Bob", "xml:lang": "en" },

                   "mbox" : { "type": "uri", "value": "mailto:bob@work.example.org" },

                   "friend" : { "type": "bnode", "value": "r1" }
               }
           ]
       }
}</pre>
    </section>
    <section id="content-type">
      <h2>Internet Media Type, File Extension and Macintosh File Type</h2>
      <p>The Internet Media Type / MIME Type for the SPARQL Query Results JSON Format is "application/sparql-results+json".</p>
      <p>It is recommended that SPARQL Query Results JSON Format files have the extension ".srj" (all lowercase) on all platforms.</p>
      <p>It is recommended that SPARQL Query Results JSON Format files stored on Macintosh HFS file systems be given a file type of "TEXT".</p>
      <p>This information that follows is intended to be submitted to the IESG for review, approval, and registration with IANA.</p>
      <dl>
        <dt>Type name:</dt>
        <dd>application</dd>
        <dt>Subtype name:</dt>
        <dd>sparql-results+json</dd>
        <dt>Required parameters:</dt>
        <dd>None</dd>
        <dt>Optional parameters:</dt>
        <dd>None</dd>
        <dt>Encoding considerations:</dt>
        <dd>The encoding considerations of the SPARQL Query Results JSON Format is identical to those of the "application/json" as specified in [<a href="#JSON-RFC">JSON-RFC</a>].</dd>
        <dt>Security considerations:</dt>
        <dd>SPARQL query results uses URIs. See Section 7 of [<a href="#RFC3986">RFC3986</a>].<br>
        SPARQL query results uses IRIs. See Section 8 of [<a href="#RFC3987">RFC3987</a>].<br>
        The security considerations of the SPARQL Query Results JSON Format is identical to those of the "application/json" as specified in [<a href="#JSON-RFC">JSON-RFC</a>].</dd>
        <dt>Interoperability considerations:</dt>
        <dd>There are no known interoperability issues.</dd>
        <dt>Published specification:</dt>
        <dd>http://www.w3.org/TR/sparql11-results-json/</dd>
        <dt>Applications which use this media type:</dt>
        <dd>No known applications currently use this media type.</dd>
        <dt>Additional information:</dt>
        <dt>Magic number(s):</dt>
        <dd>n/a</dd>
        <dt>File extension(s):</dt>
        <dd>".srj"</dd>
        <dt>Macintosh file type code(s):</dt>
        <dd>"TEXT"</dd>
        <dt>Person &amp; email address to contact for further information:</dt>
        <dd>Andy Seaborne &lt;public-rdf-dawg-comments@w3.org&gt;</dd>
        <dt>Intended usage:</dt>
        <dd>COMMON</dd>
        <dt>Restrictions on usage:</dt>
        <dd>None</dd>
        <dt>Author/Change controller:</dt>
        <dd>The SPARQL specification is a work product of the World Wide Web Consortium's SPARQL Working Group. The W3C has change control over these specifications.</dd>
      </dl>
    </section>
    <section id="sec-bibliography">
      <h2>References</h2>
      <section id="sec-normative-refs">
        <h3>Normative References</h3>
        <dl>
          <dt><span class="doc-ref" id="JSON-RFC">[JSON-RFC]</span></dt>
          <dd><a href="http://www.ietf.org/rfc/rfc4627.txt">RFC 4627</a>,<br>
          The application/json Media Type for JavaScript Object Notation (JSON),<br>
          D. Crockford,<br>
          <a href="http://www.ietf.org/rfc/rfc4627.txt">http://www.ietf.org/rfc/rfc4627.txt</a></dd>
          <dt><span class="doc-ref" id="RFC3986">[RFC3986]</span></dt>
          <dd><a href="http://www.ietf.org/rfc/rfc3986.txt">RFC 3986</a>,<br>
          Uniform Resource Identifier (URI): Generic Syntax,<br>
          T. Berners-Lee, R. Fielding, L. Masinter,<br>
          <a href="http://www.ietf.org/rfc/rfc3986.txt">http://www.ietf.org/rfc/rfc3986.txt</a></dd>
          <dt><span class="doc-ref" id="RFC3987">[RFC3987]</span></dt>
          <dd><a href="http://www.ietf.org/rfc/rfc3987.txt">RFC 3987</a>,<br>
          Internationalized Resource Identifiers (IRIs),<br>
          M. Dürst, M. Suignard,<br>
          <a href="http://www.ietf.org/rfc/rfc3987.txt">http://www.ietf.org/rfc/rfc3987.txt</a></dd>
        </dl>
      </section>
      <section id="sec-non-normative-refs">
        <h3>Other References</h3>
        <dl>
          <dt><span class="doc-ref" id="SRX">[SRX]</span></dt>
          <dd><cite><a href="http://www.w3.org/TR/2013/REC-rdf-sparql-XMLres-20130321">SPARQL Query Results XML Format (Second Edition)</a></cite>, D. Beckett, J. Broekstra, Editors, W3C
          Recommendation, 21 March 2013, http://www.w3.org/TR/2013/REC-rdf-sparql-XMLres-20130321. <a href="http://www.w3.org/TR/rdf-sparql-XMLres/" title=
          "Latest version of SPARQL Query Results XML Format (Second Edition)">Latest version</a> available at http://www.w3.org/TR/rdf-sparql-XMLres.</dd>
        </dl>
      </section>
    </section>
    
<!-- BODY -->
    <section id="privacy">
      <h2>Privacy Considerations</h2>
      <p>TODO</p>
    </section>

    <section id="security">
      <h2>Security Considerations</h2>
      <p>TODO</p>
    </section>

    <section id="internationalization">
      <h2>Internationalization Considerations</h2>
      <p>TODO</p>                
    </section>

    <section class="appendix informative" id="changes-from-sparql11">
      <h2>Change Log</h2>
      <p>TODO</p>
    </section>   

  </body>
</html>
